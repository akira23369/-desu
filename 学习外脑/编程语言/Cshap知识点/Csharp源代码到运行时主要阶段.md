#编程语言/Csharp #永久 


![[Pasted image 20240202185144.png]]
在 C# 中，从源代码到运行时的整个过程可以分为以下主要阶段：

### 1. 源代码阶段：

1. **编写源代码：** 开发者编写 C# 源代码文件（`.cs`）。

### 2. 编译阶段：
2. **编译：** 使用 C# 编译器（`csc.exe`）将源代码编译为中间语言（IL，Intermediate Language）代码。生成的文件通常是一个扩展名为 `.exe`（可执行文件）或 `.dll`（动态链接库）的程序集。
3. **生成[[元数据]]：** 编译过程中，生成包含程序集信息的[[元数据]]，包括类型、成员、版本等信息。

### 3. JIT 编译阶段：
4. **JIT 编译：** 在运行时，Common Language Runtime（CLR）的 JIT 编译器负责将 IL 代码编译为本地机器代码。这一步是在程序加载到内存时进行的，即时（Just-In-Time）编译。

### 4. 执行阶段：
5. **加载程序集：** CLR 加载编译好的程序集，包括 IL 代码和[[元数据]]。
6. **执行程序：** 程序在 CLR 中执行，JIT 编译器将 IL 代码转换为本地机器代码。执行过程中，CLR 负责内存管理、类型检查、垃圾回收等任务。
### 总结：

1. **开发者阶段：** 编写源代码。
2. **编译阶段：** 编译源代码生成 IL 代码和[[元数据]]。
3. **JIT 编译阶段：** 在运行时将 IL 代码编译为本地机器代码。
4. **执行阶段：** 加载程序集，执行程序，CLR 负责管理运行时环境。